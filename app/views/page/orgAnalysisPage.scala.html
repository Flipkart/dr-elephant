@*
* Copyright 2016 LinkedIn Corp.
*
* Licensed under the Apache License, Version 2.0 (the "License"); you may not
* use this file except in compliance with the License. You may obtain a copy of
* the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
* WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
* License for the specific language governing permissions and limitations under
* the License.
*@

@(org: String, subOrg: String, finishedTimeBegin: Long, finishedTimeEnd: Long, results: Html)

@import java.util.Date
@import java.text.SimpleDateFormat
@import com.linkedin.drelephant.util.Utils;

@getDateTime(epochTime : Long) = @{
if(epochTime == null || epochTime==Long.MAX_VALUE || epochTime==Long.MIN_VALUE){
null
}
else {
val df:SimpleDateFormat = new SimpleDateFormat("MM/dd/yyyy")
val date:String = df.format(epochTime)
date
}
}

@main("Dr. Elephant - Org Analysis", "organalysis") {

@tags.column(12) {
@tags.panel(){ Org Analysis } {
<form id="org-analysis-form" role="form" method="get" action="@routes.Application.orgAnalysis()">

    <div class="form-group" style="padding-left:10px;">
        <label for="org-selection">Org</label>
        <select class="form-control" name="org-analysis-org" id="org-selection">
            <option value="@org">select org</option>
            @for(org <- Utils.getOrgNames()) {
            <option value="@org">@org</option>
            }
        </select>
    </div>

    <div class="form-group" style="padding-left:10px;">
        <label for="sub-org-selection">Sub Org</label>
        <select class="form-control" name="org-analysis-sub_org" id="sub-org-selection">
            <option value="@subOrg">select sub-org</option>
        </select>
    </div>

    <!--Job Finish Date filter-->

    <div class="checkbox" id="form-org-analysis-checkbox">
        <label><input type="checkbox" id="form-datetime-enable" name="datetime-enable" value=""> Job Finish
            Date</label>
    </div>
    <div class="form-group" style="padding-left:10px;">
        <input type="text" class="form-control" id="form-finished-time-begin-date" name="finished-time-begin-date"
               placeholder="From: mm/dd/yyyy" value="@getDateTime(finishedTimeBegin)">

        <input type="hidden" id="form-finished-time-begin" name="finished-time-begin" value=""/>
    </div>
    <div class="form-group" style="padding-left:10px;">
        <input type="text" class="form-control" id="form-finished-time-end-date" name="finished-time-end-date"
               placeholder="To: mm/dd/yyyy" value="@getDateTime(finishedTimeEnd)">
        <input type="hidden" id="form-finished-time-end" name="finished-time-end" value=""/>
    </div>

    <br>
    <button type="submit" class="btn btn-default" id="submit-button">Search</button>
</form>
}
}

@tags.column(12) {
@results
}

}
